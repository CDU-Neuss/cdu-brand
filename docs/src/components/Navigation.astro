---
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";
import logo from "../../../resources/img/cdu-logo-white-transparent.png";
const base = import.meta.env.BASE_URL;

const navigationTree = [
  {
    name: "Basics",
    items: [
      { name: "Introduction", href: base },
      { name: "Logo", href: `${base}/logo` },
      { name: "Colors", href: `${base}/colors` },
      { name: "Typography", href: `${base}/typography` },
    ],
  },
  {
    name: "Components",
    items: [
      { name: "Button", href: `${base}/button` },
      { name: "Union Title", href: `${base}/union-title` },
      { name: "Icon Circle", href: `${base}/icon-circle` },
      { name: "Feature", href: `${base}/feature` },
      { name: "Call to Action", href: `${base}/cta` },
      { name: "Linked Section", href: `${base}/linked-section` },
      { name: "Countdown", href: `${base}/countdown` },
      { name: "Authors", href: `${base}/authors` },
      { name: "Eye Catcher Circle", href: `${base}/eye-catcher-circle` },
    ],
  },
  {
    name: "Utilities",
    items: [{ name: "Arc Background", href: `${base}/arc-background` }],
  },
  {
    name: "Plugins",
    items: [
      { name: "Prose", href: `${base}/prose` },
      { name: "Swiper", href: `${base}/swiper` },
    ],
  },
];
---

<aside x-data="{ open: false }" x-transition @click.outside="open = false">
  <button @click="open = !open">
    <Icon name="ph:list-bold" />
    Menu
  </button>
  <div x-show="open" x-cloak>
    <nav>
      <dl>
        {
          navigationTree.map((section) => (
            <>
              <dt>{section.name}</dt>
              <dd>
                <ul>
                  {section.items.map((item) => (
                    <li>
                      <a href={item.href}>{item.name}</a>
                    </li>
                  ))}
                </ul>
              </dd>
            </>
          ))
        }
      </dl>
    </nav>
    <footer class="mt-12 text-center font-sans text-xs font-light">
      <a href="https://www.cdu-neuss.de" target="_blank" class="mx-auto mb-4 inline-block hover:scale-105">
        <Image src={logo} alt="CDU Logo" class="w-20" loading="lazy" width={128} height={128} />
      </a>
      <p>&copy;2025 CDU Neuss</p>
    </footer>
  </div>
</aside>

<style>
  @import url("../styles/global.css");

  aside {
    > button {
      @apply text-rhoendorf fixed top-24 left-2 flex flex-row items-center rounded-full bg-white/60 px-2 py-1 font-sans text-xs font-light backdrop-blur-xl md:hidden;
      z-index: 51;

      svg {
        @apply mr-1 size-6;
      }
    }

    > div {
      @apply bg-rhoendorf dark:bg-rhoendorf-60 text-rhoendorf-10 fixed bottom-0 z-50 w-52 flex-col justify-between overflow-y-scroll py-12 md:!flex;
      height: calc(100vh - var(--spacing) * 20);
    }

    dl {
      @apply m-4 font-sans;

      dt {
        @apply text-cadenabbia-25 mb-1 text-xs font-extrabold uppercase;
      }

      dd {
        @apply mb-4 font-light;

        &:last-child {
          @apply mb-0;
        }

        a {
          @apply decoration-gold decoration-2 hover:underline;
        }
      }
    }
  }
</style>
